# 周报-20230202


## 1. 项目进展Ultrasound_vid_static_frame

### 1.1. 对于``非静止帧``视频和``人工采样（随机在有标注框的位置造静止帧）``视频统计非静止帧和静止帧的结果

#### 1.1.1. 20230112实验结果分析（rate = 0.4）
云南省大理大学第一附属医院_阳性、南昌市第三医院_阴性需要关注。为什么数据这么差。**这部分下周做**

```shell
python tools/eval_pred.py
```

``tools/eval_pred.py``主函数修改为：

```python
if __name__ == "__main__":
    main(
        file_path="outputs/BUS_BasicConfig_StaticFrame/predictions/breast_ALL@20221108-145033",
        dataset_name="breast_ALL@20221108-145033",
        csv_file="/projects/US/ProjectDatasets/db/breast/pkl_labels_trainval/20221108-145033.csv",
        by_device=False, 
        by_hospital=True,
        by_negative=True,
        negative_fp_thresh=0.868509829044342,
    )
```
实验结果：
```text
+-----------------------+-------+-------+--------+-------+--------+
| Split                 |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+-----------------------+-------+-------+--------+-------+--------+
| 北京大学肿瘤医院_阳性 | 86.07 | 90.33 | 0.6911 | 97.95 |   21   |
+-----------------------+-------+-------+--------+-------+--------+
+---------------------------+-------+-------+--------+-------+--------+
| Split                     |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------------+-------+-------+--------+-------+--------+
| 郑州大学第一附属医院_阳性 | 84.68 | 91.09 | 1.2662 | 96.55 |   19   |
+---------------------------+-------+-------+--------+-------+--------+
+---------------------+-------+-------+--------+-------+--------+
| Split               |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------+-------+-------+--------+-------+--------+
| 宝清县人民医院_阳性 | 89.15 | 91.95 | 0.4986 | 98.78 |   22   |
+---------------------+-------+-------+--------+-------+--------+
+---------------------------------+-------+-------+---------+-------+--------+
| Split                           |  AP50 | P@0.7 |    FP   |  R@16 | #Video |
+---------------------------------+-------+-------+---------+-------+--------+
| 云南省大理大学第一附属医院_阳性 | 54.24 | 23.70 | 42.2757 | 85.67 |   5    |
+---------------------------------+-------+-------+---------+-------+--------+
+-------------------------------+-------+-------+--------+-------+--------+
| Split                         |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+-------------------------------+-------+-------+--------+-------+--------+
| 大连医科大学附属第一医院_阳性 | 89.57 | 95.43 | 0.4517 | 96.91 |   36   |
+-------------------------------+-------+-------+--------+-------+--------+
+-------------------+-------+-------+--------+-------+--------+
| Split             |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+-------------------+-------+-------+--------+-------+--------+
| 广东省中医院_阳性 | 89.90 | 93.88 | 0.9798 | 98.19 |   76   |
+-------------------+-------+-------+--------+-------+--------+
+---------------------------------+-------+-------+--------+-------+--------+
| Split                           |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------------------+-------+-------+--------+-------+--------+
| 中国科学院大学附属肿瘤医院_阳性 | 86.40 | 92.04 | 2.2310 | 95.59 |   73   |
+---------------------------------+-------+-------+--------+-------+--------+
+---------------------------+-------+-------+--------+-------+--------+
| Split                     |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------------+-------+-------+--------+-------+--------+
| 四川省广元市中心医院_阳性 | 92.35 | 95.97 | 0.7714 | 98.85 |   8    |
+---------------------------+-------+-------+--------+-------+--------+
+---------------------+------+-------+--------+------+--------+
| Split               | AP50 | P@0.7 |   FP   | R@16 | #Video |
+---------------------+------+-------+--------+------+--------+
| 南昌市第三医院_阴性 | 0.00 |  0.00 | 0.5826 | 0.00 |  155   |
+---------------------+------+-------+--------+------+--------+
+---------------------+-------+-------+--------+-------+--------+
| Split               |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------+-------+-------+--------+-------+--------+
| 南昌市第三医院_阳性 | 87.62 | 92.85 | 0.5519 | 96.67 |  476   |
+---------------------+-------+-------+--------+-------+--------+
+---------------------+-------+-------+--------+-------+--------+
| Split               |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------+-------+-------+--------+-------+--------+
| 铁岭市中心医院_阳性 | 95.82 | 97.64 | 0.4508 | 99.87 |   7    |
+---------------------+-------+-------+--------+-------+--------+
+---------------------+-------+-------+--------+-------+--------+
| Split               |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+---------------------+-------+-------+--------+-------+--------+
| 云南省肿瘤医院_阳性 | 93.26 | 97.66 | 0.1351 | 98.58 |   25   |
+---------------------+-------+-------+--------+-------+--------+
+-------------------+-------+-------+--------+-------+--------+
| Split             |  AP50 | P@0.7 |   FP   |  R@16 | #Video |
+-------------------+-------+-------+--------+-------+--------+
| 郑州中心医院_阳性 | 80.18 | 84.48 | 1.7317 | 95.31 |   25   |
+-------------------+-------+-------+--------+-------+--------+
```

### 1.2. 试一下跑甲状腺的数据，看看会不会提点，就按照现有版本改，然后跑甲状腺的数据

#### 1.2.1. 俞在甲状腺上的实验

0.4的概率剔除静止帧在甲状腺上FP反而变差了1.1/min=>1.3/min。移除概率并不是0.4都好的。

#### 1.2.2. 调整为甲状腺数据集

在``ultrasound_vid/data/datasets.py``中修改。

在Bash文件中记得根据数据集位置导入。

```shell
export TUS_PROCESSED_DATA=""
```

**这部分还没完成，留给下周。**


## 论文阅读

详情参考[每日论文笔记](https://github.com/xjtulyc/daily-paper-reading2023)


## 下周工作

1. 检查错误例原因
